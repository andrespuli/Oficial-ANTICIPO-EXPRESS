<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Iniciar Sesión</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/login.css' %}">
</head>

<body>
  <div class="contenedor">
    <img src="{% static 'img/avatar.png' %}" alt="avatar anticipo express" class="avatar">

    <div class="formulario">
      <form id="loginForm" method="GET">
        <h2>Bienvenido a CAE</h2>
        <p>Inicia sesión para continuar.</p>

        <label for="email">Correo Electrónico:</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Tu correo@ejemplo.com"
          required
        />

        <label for="password">Contraseña:</label>
        <input
          type="password"
          id="password"
          name="password"
          placeholder="Tu contraseña"
          required
        />

        <label for="rol">Selecciona tu rol:</label>
        <select id="rol" name="rol" required>
          <option value="">-- Selecciona un rol --</option>
          <option value="administrador">Administrador</option>
          <option value="vendedor">Vendedor</option>
          <option value="cajero">Cajero</option>
          <option value="admiPrestamos">Admi de Préstamos</option>
        </select>

        <a href="#" class="link">¿Olvidaste tu contraseña?</a>

        <button class="btn" type="submit">Iniciar Sesión</button>
      </form>
    </div>
  </div>

  <script>
const form = document.getElementById('loginForm');

form.addEventListener('submit', function (event) {
    event.preventDefault();

    const rol = document.getElementById('rol').value;

    if (!rol) {
        alert('Por favor, selecciona un rol antes de continuar.');
        return;
    }

    let destino = '';

    switch (rol) {
        case 'administrador':
            destino = "{% url 'admin_inicio' %}";
            break;

        case 'vendedor':
            destino = "{% url 'vendedor_nueva_venta' %}";
            break;

        case 'cajero':
            destino = "{% url 'ventas_del_dia' %}";
            break;

        case 'admiPrestamos':
            destino = "{% url 'prestamos_inicio' %}";
            break;
    }

    window.location.href = destino;
});
</script>
</body>
</html>
